{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{{ restaurant.name }} • Bookify</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root{
      --bg:#f7f7f8; --panel:#ffffff; --text:#1f2328; --muted:#667085; --line:#e6e7eb;
      --brand:#ff7a1a; --brand-600:#ff6a00; --brand-50:#fff4eb; --radius:18px;
      --shadow:0 6px 24px rgba(0,0,0,.06); --shadow-sm:0 1px 3px rgba(0,0,0,.06);
    }
    *{box-sizing:border-box}
    body{margin:0; background:var(--bg); color:var(--text); font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;}
    .wrap{max-width:960px; margin:0 auto; padding:24px 18px}

    .btn{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:12px;
         border:1px solid var(--line); background:#fff; font-weight:600; text-decoration:none; color:inherit; box-shadow:var(--shadow-sm)}
    .btn:hover{background:#fcfcfc}
    .btn.brand{background:var(--brand); border-color:var(--brand); color:#fff}
    .btn.brand:hover{background:var(--brand-600)}

    .panel{background:var(--panel); border:1px solid var(--line); border-radius:var(--radius); padding:20px; box-shadow:var(--shadow)}
    h1{margin:0; font-size:28px}
    .meta{color:var(--muted); margin-top:6px}
    .section{margin-top:18px}

    /* Hours block */
    #hours .table{border:1px solid var(--line); border-radius:14px; overflow:hidden}
    #hours .row{display:grid; grid-template-columns:1fr auto auto; gap:10px; padding:12px 14px; background:#fff}
    #hours .row:not(:last-child){border-bottom:1px solid var(--line)}
    #hours .day{font-weight:600}
    #hours .time{font-variant-numeric:tabular-nums}
    .group{display:flex; gap:10px; flex-wrap:wrap}
  </style>
</head>
<body>
  <div class="wrap">
    <p><a class="btn" href="{% url 'restaurant_browse' %}">← Back to list</a></p>

    <article class="panel">
      <header>
        <h1>{{ restaurant.name }}</h1>
        <p class="meta">{{ restaurant.cuisine }} • {{ restaurant.address }} • Seats {{ restaurant.capacity }}</p>
      </header>

      {% if restaurant.description %}
        <p class="section">{{ restaurant.description }}</p>
      {% endif %}

      <!-- CTA (role-aware, no forced ?next) -->
      <div class="section group">
        {% if user.is_authenticated %}
          {% if user.role == 'CUSTOMER' %}
            <a class="btn brand" href="{% url 'customer_dashboard' %}?q={{ restaurant.name|urlencode }}">
              Book this restaurant
            </a>
          {% elif user.role == 'OWNER' %}
            <a class="btn brand" href="{% url 'owner_dashboard' %}">Manage reservations</a>
          {% else %}
            <a class="btn brand" href="{% url 'staff_dashboard' %}">Manage reservations</a>
          {% endif %}
        {% else %}
          <a class="btn brand" href="{% url 'login' %}">Log in to book</a>
        {% endif %}
      </div>

     <!-- Opening hours -->
<section id="hours" class="section" aria-label="Opening hours">
  <h3 style="margin:0 0 10px 0">Opening hours</h3>
  <div class="table">
    {% for day, open_t, close_t in opening_rows %}
      <div class="row">
        <div class="day">{{ day }}</div>
        <div class="time">{% if open_t %}{{ open_t }}{% else %}—{% endif %}</div>
        <div class="time">– {% if close_t %}{{ close_t }}{% else %}—{% endif %}</div>
      </div>
    {% endfor %}
  </div>
</section>
